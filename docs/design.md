# 钱程似金 - H5 横版闯关游戏设计文档

## 1. 游戏概述

### 1.1 游戏类型

- 网页版横向卷轴闯关 H5 小游戏
- 平台跳跃 + 动作冒险

### 1.2 游戏主题

钱程似金 - 玩家控制勇士穿越重重关卡，击败敌人和障碍，最终营救被囚禁的公主

### 1.3 目标平台

- 移动端 H5 优先
- 支持桌面浏览器
- 自动横屏显示

### 1.4 美术风格

- 简洁可爱的卡通风格
- 色彩明快、界面友好
- 使用 Canvas 渲染，确保流畅的动画效果

---

## 2. 游戏机制

### 2.1 核心玩法

- 横向卷轴移动
- 平台跳跃
- 攻击敌人
- 躲避陷阱
- 到达终点营救公主

### 2.2 操作控制

#### 移动端控制

- 虚拟摇杆/按钮控制左右移动
- 跳跃按钮
- 攻击按钮

#### PC 端控制

- 方向键/WASD：左右移动
- 空格键：跳跃
- J 键/鼠标点击：攻击

### 2.3 角色能力

#### 勇士

- **移动速度**: 中等速度的左右移动
- **跳跃**: 单次跳跃，跳跃高度约 2-3 个角色身高
- **攻击**: 近战攻击，攻击范围约 1 个角色宽度
- **武器**: 剑
- **生命值**: 3 颗心
- **头像**: 圆形头像框

#### 公主

- **头像**: 圆形头像框
- **位置**: 关卡右侧终点
- **通关前状态**: 头像悬浮在屏幕右上角，轻微浮动动画

---

## 3. 关卡设计

### 3.1 关卡结构

- 关卡长度：约 5-8 个屏幕宽度
- 起点：左侧，勇士出生位置
- 终点：右侧，公主被囚禁的位置（塔楼/牢笼）

### 3.2 障碍元素

#### 平台

- **普通平台**: 可站立的地面和悬浮平台
- **高低平台**: 不同高度的平台，需要跳跃到达
- **移动平台**: 左右或上下移动的平台
- **间距**: 平台间距设计合理，可通过跳跃到达

#### 陷阱

- **坑洞**: 深坑，掉落即失去全部血量
- **尖刺陷阱**: 接触失去一颗心
- **移动陷阱**: 周期性出现/移动的危险区域

#### 敌人

- **小怪类型**:
  - 地面巡逻怪：在平台上左右移动
  - 飞行怪：在空中飞行
  - 静止怪：固定位置的敌人
- **击败方式**: 跳跃踩踏或攻击
- **数量**: 3-5 个小怪分布在关卡中

### 3.3 关卡难度曲线

- **前 30%**: 简单平台跳跃，熟悉操作
- **中 40%**: 增加陷阱和敌人，提升难度
- **后 30%**: 复杂组合挑战，需要精准操作

---

## 4. 游戏流程

### 4.1 开场动画

1. 游戏 Logo 淡入
2. **公主被掳走动画**:
   - 公主站在城堡中
   - 黑影/怪物出现
   - 公主被抓走（向右侧移出屏幕）
   - 勇士出现，决心营救
3. 动画时长：5-8 秒
4. 可跳过选项

### 4.2 游戏进行中

1. 玩家控制勇士从左侧开始
2. 屏幕右上角悬浮公主头像，轻微浮动效果（呼吸感）
3. 左上角显示生命值（心形图标）
4. 击败敌人、躲避陷阱、跳跃平台
5. 摄像机跟随勇士移动（横向卷轴）

### 4.3 通关条件

- 勇士到达关卡右侧终点
- 与公主相遇触发通关

### 4.4 胜利动画

1. 勇士和公主相拥（两个角色靠近）
2. 屏幕飘出爱心特效（多个爱心从下往上飘散）
3. 背景音乐切换为胜利音效
4. 显示 "钱程似锦"(代表胜利) 文字
5. 选项：重新开始

### 4.5 失败条件

- 生命值耗尽
- 显示 "燕子，没有你我怎么活啊~" 界面
- 选项：重新开始 / 返回主菜单

---

## 5. 技术实现

### 5.1 技术栈

- **HTML5 Canvas**: 游戏渲染
- **原生 JavaScript** 或轻量级游戏引擎（如 Phaser.js）
- **CSS3**: 页面布局和动画辅助
- **响应式设计**: 适配不同屏幕尺寸

### 5.2 Canvas 渲染要求

- **人物绘制**: 使用 Canvas 绘制完整的角色形象，不能简单图形拼凑
  - 头部：圆形头像框，使用 Image 标签，王子采用图片 warrior.jpg，公主采用图片 princess.jpg
  - 身体：卡通风格的身体、四肢
  - 动画：行走、跳跃、攻击、受伤等动作帧
- **场景绘制**: 平台、背景、陷阱、敌人
- **特效绘制**: 爱心特效、攻击特效、粒子效果

### 5.3 横屏适配

- 检测设备方向
- 竖屏时显示 "请横屏游戏" 提示
- 横屏自动全屏展示游戏画面

### 5.4 性能优化

- 精灵图/图集减少加载次数
- 对象池管理游戏对象
- 离屏 Canvas 预渲染
- 帧率控制：60 FPS

---

## 6. UI/UX 设计

### 6.1 主菜单

- 游戏标题
- 开始游戏按钮
- 操作说明按钮
- 音效开关

### 6.2 游戏界面 HUD

- **左上角**: 生命值显示（心形图标）
- **右上角**: 公主头像悬浮（通关前）
- **底部中央**: 移动端虚拟控制按钮
- **暂停按钮**: 右上角

### 6.3 暂停菜单

- 继续游戏
- 重新开始
- 返回主菜单
- 音效设置

### 6.4 通关/失败界面

- 结果文字（胜利/失败）
- 重新开始按钮
- 返回主菜单按钮

---

## 7. 音效与音乐

### 7.1 背景音乐

- 主菜单音乐：轻快欢乐
- 游戏进行中：冒险风格 BGM
- 胜利音乐：欢快的胜利音效

### 7.2 音效

- 跳跃音效
- 攻击音效
- 受伤音效
- 击败敌人音效
- 拾取道具音效（如有）
- 通关音效

---

## 8. 扩展功能（可选）

### 8.1 进阶功能

- 多关卡设计（关卡选择界面）
- 道具系统（加速、无敌、双倍跳跃）
- 计分系统（击败敌人加分、时间奖励）
- 排行榜

---

## 9. 开发里程碑

### Phase 1: 核心框架（1-2 天）

- [ ] Canvas 渲染引擎搭建
- [ ] 基础物理系统（重力、碰撞检测）
- [ ] 角色控制系统
- [ ] 横屏适配

### Phase 2: 游戏内容（2-3 天）

- [ ] 角色绘制与动画（Canvas）
- [ ] 关卡设计与实现
- [ ] 敌人 AI 与陷阱
- [ ] 碰撞与交互逻辑

### Phase 3: UI 与特效（1-2 天）

- [ ] 主菜单与 HUD
- [ ] 开场动画
- [ ] 胜利/失败界面
- [ ] 爱心特效与其他粒子效果

### Phase 4: 优化与测试（1-2 天）

- [ ] 性能优化
- [ ] 多设备测试
- [ ] 音效音乐集成
- [ ] Bug 修复

---

## 10. 参考资料

### 游戏设计参考

- 超级玛丽：平台跳跃机制
- 洛克人：关卡设计
- 塞尔达传说：简洁可爱的美术风格

### 技术参考

- Canvas API 文档
- Phaser.js 官方教程（如使用）
- H5 游戏性能优化最佳实践

---

## 附录

### A. 角色尺寸参考

- 勇士高度：60-80px
- 公主高度：60-80px
- 头像直径：40-50px
- 平台高度：20-30px

### B. 配色方案建议

- 勇士：蓝色/绿色系
- 公主：粉色/紫色系
- 背景：淡蓝天空 + 绿色草地
- 敌人：红色/灰色系
- 爱心特效：粉红色/红色
