# 钱程似金 - uni-app 横版闯关游戏

一个基于 uni-app 和 Canvas 的横版卷轴闯关游戏，主题为勇士营救被囚禁的公主。支持 H5、小程序等多端运行。

## 游戏特性

- 🎮 流畅的平台跳跃和动作操作
- 🎨 可爱简洁的卡通风格
- 📱 支持移动端和桌面端
- 🔄 自动横屏适配
- 👑 自定义头像功能（使用本地图片）
- ❤️ 爱心特效和胜利动画
- 🎯 多种敌人和陷阱挑战
- 🌐 基于 uni-app，支持多端运行（H5、微信小程序等）

## 如何运行

### 方式一：使用 HBuilderX（推荐）

1. 下载安装 [HBuilderX](https://www.dcloud.io/hbuilderx.html)
2. 将项目文件夹拖入 HBuilderX
3. 运行 -> 运行到浏览器 或 运行到小程序模拟器

### 方式二：使用 uni-app CLI

1. 安装依赖：

   ```bash
   npm install
   ```

2. 运行到 H5：

   ```bash
   npm run dev:h5
   ```

3. 构建生产版本：
   ```bash
   npm run build:h5
   ```

### 方式三：微信小程序

1. 在 HBuilderX 中运行到微信开发者工具
2. 或使用命令：
   ```bash
   npm run dev:mp-weixin
   ```

## 游戏操作

### PC 端控制

- **← → 或 A/D**: 左右移动
- **空格键**: 跳跃
- **J 键**: 攻击

### 移动端控制

- 使用屏幕下方的虚拟按钮：
  - **← →**: 左右移动按钮
  - **跳跃**: 跳跃按钮
  - **攻击**: 攻击按钮

## 游戏玩法

1. **目标**: 控制勇士从左侧出发，穿越重重关卡，到达右侧与公主相拥即可通关

2. **障碍**:

   - 🏔️ 多层平台 - 需要精准跳跃
   - ⚠️ 尖刺陷阱 - 接触会失去 1 颗心
   - 🕳️ 深坑 - 掉落即失败
   - 👹 敌人 - 地面巡逻怪和飞行怪

3. **生命值**: 3 颗心

   - 触碰敌人或尖刺会失去 1 颗心
   - 掉入深坑直接失败
   - 生命值耗尽游戏结束

4. **击败敌人**:

   - 从上方跳跃踩踏
   - 或使用攻击键进行近战攻击

5. **通关**: 到达关卡右侧与公主相遇，屏幕会飘出爱心特效，显示"钱程似锦"

## 游戏界面

- **左上角**: 生命值显示（❤️ 心形图标）
- **右上角**: 公主头像悬浮（通关前会轻微浮动）
- **右上角**: 暂停按钮

## 技术特性

- **uni-app 框架**: 跨平台支持，一次开发多端运行
- **Canvas 渲染**: 使用原生 Canvas API 绘制所有游戏元素
- **物理系统**: 实现重力、跳跃和碰撞检测
- **摄像机系统**: 横向卷轴跟随角色移动
- **动画系统**: 角色行走、跳跃、攻击等动作
- **响应式设计**: 自动适配不同屏幕尺寸
- **组件化开发**: 游戏逻辑模块化，便于维护

## 自定义头像

游戏使用以下图片作为角色头像：

- `static/assets/warrior.jpg` - 勇士的头像
- `static/assets/princess.jpg` - 公主的头像

你可以替换这些图片来自定义角色外观。建议图片尺寸为 100x100px 或更高分辨率的正方形图片。

## 文件结构

```
warrior-rescue-princess/
├── pages/                  # 页面目录
│   ├── index/             # 首页（菜单）
│   │   └── index.vue
│   └── game/              # 游戏页面
│       └── game.vue
├── components/            # 组件目录
│   └── GameClasses.js     # 游戏类（勇士、公主、敌人等）
├── static/                # 静态资源
│   └── assets/           # 游戏资源（图片、精灵图）
├── App.vue               # 应用主组件
├── main.js               # 入口文件
├── pages.json            # 页面配置
├── manifest.json         # 应用配置
├── package.json          # npm配置
├── uni.scss              # 全局样式变量
├── uni.promisify.adaptor.js  # Promise适配器
├── prompt.md             # 游戏设计文档
└── README.md             # 说明文档
```

## 平台兼容性

- ✅ H5（浏览器）
- ✅ 微信小程序
- ✅ 支付宝小程序
- ✅ 百度小程序
- ✅ 字节跳动小程序
- ⚠️ App（需要测试 Canvas 性能）

## 开发说明

游戏基于 uni-app 框架开发，使用 Vue.js 和原生 JavaScript。主要类包括：

- `SoundManager` - 音效管理类
- `Warrior` - 勇士角色类
- `Princess` - 公主角色类
- `Platform` - 平台类
- `Enemy` - 敌人类
- `Trap` - 陷阱类

所有游戏类都封装在 `components/GameClasses.js` 中，游戏逻辑在 `pages/game/game.vue` 中实现。

## 开发技巧

1. **调试 Canvas**: 使用浏览器的 H5 端进行开发调试，Canvas 操作更方便
2. **性能优化**: 注意控制绘制次数和对象数量
3. **多端适配**: 不同平台的 Canvas API 可能有差异，需要测试
4. **图片资源**: 确保所有图片路径正确，使用`/static/`开头的绝对路径

## 游戏设计文档

详细的游戏设计文档请参考 [prompt.md](prompt.md)，包含：

- 完整的游戏机制说明
- 关卡设计理念
- 技术实现细节
- 开发里程碑

## 许可证

本项目仅供学习和娱乐使用。

## 致谢

灵感来源：

- 超级玛丽：平台跳跃机制
- 洛克人：关卡设计
- 塞尔达传说：简洁可爱的美术风格
